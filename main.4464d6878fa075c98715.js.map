{"version":3,"sources":["webpack:///./weather-service.js","webpack:///./weather-current.js","webpack:///./weather-forecast.js","webpack:///./weather.js","webpack:///./template/weather-forecast.hbs"],"names":["WeatherService","constructor","dBase","dKey","location","this","getBase","setLocation","getLocation","CurrentWeatherService","super","dResource","get","query","fetch","then","response","json","ForecastWeatherService","days","catch","error","Error","domRefs","form","_self","document","querySelector","input","button","w","icon","temperature","humidity","wind","conditions","applyWeatherCurrent","current","src","condition","alt","text","innerHTML","name","region","country","lat","lon","temp_c","wind_dir","wind_kph","classList","remove","applyWeatherForecast","forecast","markup","items","weatherForecastTemplate","forecastSection","insertAdjacentHTML","addEventListener","e","preventDefault","currentWeather","forecastWeather","entry","Object","entries","disabled","value","alert","userLocation","forecastday","reset","options","timeout","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","console","log","Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","helper","alias1","escapeExpression","alias2","lambda","date","helperMissing","call","nullContext","day","astro","sunrise","sunset","maxtemp_c","mintemp_c","avgtemp_c","avghumidity","maxwind_kph","each","program","noop"],"mappings":"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","file":"main.4464d6878fa075c98715.js","sourcesContent":["export default class WeatherService {\r\n  constructor({\r\n    dBase = \"https://api.apixu.com/v1\",\r\n    dKey = \"86c35fa65a404206876174320190508\",\r\n    location = \"Kiev\"\r\n  }) {\r\n    this.dBase = dBase;\r\n    this.dKey = dKey;\r\n    this.location = location;\r\n  }\r\n\r\n  getBase() {\r\n    return this.dBase;\r\n  }\r\n\r\n  setLocation(location) {\r\n    this.location = location;\r\n  }\r\n\r\n  getLocation() {\r\n    return this.location;\r\n  }\r\n}\r\n","import WeatherService from \"./weather-service\";\r\n\r\nexport default class CurrentWeatherService extends WeatherService {\r\n  constructor(location) {\r\n    super({ location });\r\n    this.dResource = \"/current.json\";\r\n  }\r\n  get() {\r\n    const query = `${this.dBase}${this.dResource}?key=${this.dKey}&q=${\r\n      this.location\r\n    }`;\r\n    return fetch(query).then(response => response.json());\r\n  }\r\n}\r\n","import WeatherService from \"./weather-service\";\r\n\r\nexport default class ForecastWeatherService extends WeatherService {\r\n  constructor(location, days = 7) {\r\n    super({ location });\r\n    this.dResource = \"/forecast.json\";\r\n    this.days = days;\r\n  }\r\n  get() {\r\n    const query = `${this.dBase}${this.dResource}?key=${this.dKey}&q=${\r\n      this.location\r\n    }&days=${this.days}`;\r\n    return fetch(query)\r\n      .then(response => response.json())\r\n      .catch(error => {\r\n        throw new Error(error);\r\n      });\r\n  }\r\n}\r\n","import CurrentWeatherService from \"./weather-current\";\r\nimport ForecastWeatherService from \"./weather-forecast\";\r\nimport weatherForecastTemplate from \"./template/weather-forecast.hbs\";\r\n\r\nconst domRefs = {\r\n  form: {\r\n    _self: document.querySelector(\"#search-form\"),\r\n    input: document.querySelector(\"#search-form\").querySelector(\"input\"),\r\n    button: document.querySelector(\"#search-form\").querySelector(\"button\")\r\n  },\r\n  w: {\r\n    _self: document.querySelector(\"#weather\"),\r\n    icon: document.querySelector(\".icon\"),\r\n    location: document.querySelector('span[data-field=\"location\"]'),\r\n    temperature: document.querySelector('span[data-field=\"temp\"]'),\r\n    humidity: document.querySelector('span[data-field=\"humidity\"]'),\r\n    wind: document.querySelector('span[data-field=\"wind\"]'),\r\n    conditions: document.querySelector('span[data-field=\"conditions\"]')\r\n  }\r\n};\r\n\r\ndomRefs.form._self.addEventListener(\"submit\", handleCitySubmit);\r\n\r\nfunction handleCitySubmit(e) {\r\n  e.preventDefault();\r\n\r\n  const currentWeather = new CurrentWeatherService();\r\n  const forecastWeather = new ForecastWeatherService();\r\n\r\n  for (const entry of Object.entries(domRefs.form)) {\r\n    entry.disabled = true;\r\n  }\r\n\r\n  if (domRefs.form.input.value !== \"\") {\r\n    currentWeather.setLocation(domRefs.form.input.value);\r\n    currentWeather\r\n      .get()\r\n      .then(response =>\r\n        applyWeatherCurrent(response.location, response.current)\r\n      )\r\n      .catch(error =>\r\n        alert(\r\n          `Location \"${userLocation}\"\\ndoes not recogized by ${forecastWeather.getBase()}\\nor service \"Current Weather\" is unavailable.`\r\n        )\r\n      );\r\n\r\n    forecastWeather.setLocation(domRefs.form.input.value);\r\n    forecastWeather\r\n      .get()\r\n      .then(response => applyWeatherForecast(response.forecast.forecastday))\r\n      .catch(error =>\r\n        alert(\r\n          `Location \"${userLocation}\"\\ndoes not recogized by ${forecastWeather.getBase()}\\nor service \"Weather Forecast\" is unavailable.`\r\n        )\r\n      );\r\n\r\n    domRefs.form._self.reset();\r\n  } else {\r\n    // CODE FOR GET GEO POSITION\r\n\r\n    const getCurrentPosition = () => {\r\n      const options = {\r\n        timeout: 5000\r\n      };\r\n\r\n      return new Promise((resolve, reject) => {\r\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\r\n      });\r\n    };\r\n\r\n    getCurrentPosition()\r\n      .then(location => {\r\n        currentWeather.setLocation(\r\n          `${location.coords.latitude} ${location.coords.longitude}`\r\n        );\r\n        currentWeather\r\n          .get()\r\n          .then(response =>\r\n            applyWeatherCurrent(response.location, response.current)\r\n          )\r\n          .catch(error =>\r\n            alert(\r\n              `Location \"${userLocation}\"\\ndoes not recogized by ${forecastWeather.getBase()}\\nor service \"Current Weather\" is unavailable.`\r\n            )\r\n          );\r\n\r\n        forecastWeather.setLocation(\r\n          `${location.coords.latitude} ${location.coords.longitude}`\r\n        );\r\n        forecastWeather\r\n          .get()\r\n          .then(response => applyWeatherForecast(response.forecast.forecastday))\r\n          .catch(error =>\r\n            alert(\r\n              `Location \"${userLocation}\"\\ndoes not recogized by ${forecastWeather.getBase()}\\nor service \"Weather Forecast\" is unavailable.`\r\n            )\r\n          );\r\n      })\r\n      .catch(error => {\r\n        userLocation = \"UNDEFINED\";\r\n      });\r\n\r\n    console.log(currentWeather.getLocation());\r\n    console.log(forecastWeather.getLocation());\r\n  }\r\n\r\n  for (const entry of Object.entries(domRefs.form)) {\r\n    entry.disabled = false;\r\n  }\r\n}\r\n\r\nfunction applyWeatherCurrent(location, current) {\r\n  domRefs.w.icon.src = `https:${current.condition.icon}`;\r\n  domRefs.w.icon.alt = current.condition.text;\r\n  domRefs.w.location.innerHTML = `${location.name}<br>(${location.region}, ${\r\n    location.country\r\n  })<br>Lt/Ln: ${location.lat}, ${location.lon}`;\r\n  domRefs.w.temperature.innerHTML = `${current.temp_c}&#8451`;\r\n  domRefs.w.humidity.innerHTML = current.humidity;\r\n  domRefs.w.wind.innerHTML = `${current.wind_dir} ${current.wind_kph}kph`;\r\n  domRefs.w.conditions.innerHTML = current.condition.text;\r\n\r\n  domRefs.w._self.classList.remove(\"is-hidden\");\r\n}\r\n\r\nfunction applyWeatherForecast(forecast) {\r\n  const markup = buildWeatherForecastMurkup(forecast);\r\n  const forecastSection = document.querySelector(\"#forecast\");\r\n  if (forecastSection !== null) {\r\n    forecastSection.remove();\r\n  }\r\n\r\n  domRefs.w._self.insertAdjacentHTML(\"afterend\", markup);\r\n}\r\n\r\nfunction buildWeatherForecastMurkup(items) {\r\n  return weatherForecastTemplate(items);\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=container.escapeExpression, alias2=container.lambda;\n\n  return \"        <li class=\\\"forecast-day\\\">\\r\\n            <span class=\\\"date\\\">\"\n    + alias1(((helper = (helper = helpers.date || (depth0 != null ? depth0.date : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"date\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\r\\n            <img class=\\\"icon\\\" src=\\\"https:\"\n    + alias1(alias2(((stack1 = ((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.icon : stack1), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias1(alias2(((stack1 = ((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.text : stack1), depth0))\n    + \"\\\" />\\r\\n            <p> SUN (rise/set) <span data-field=\\\"temp\\\">\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.astro : depth0)) != null ? stack1.sunrise : stack1), depth0))\n    + \"/\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.astro : depth0)) != null ? stack1.sunset : stack1), depth0))\n    + \"</span></p>\\r\\n            <p>T&#8451; (max/min/ave): <span data-field=\\\"temp\\\">\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.maxtemp_c : stack1), depth0))\n    + \"/\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.mintemp_c : stack1), depth0))\n    + \"/\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.avgtemp_c : stack1), depth0))\n    + \" &#8451;</span></p>\\r\\n            <p>Humidity (ave): <span data-field=\\\"humidity\\\">\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.avghumidity : stack1), depth0))\n    + \" %</span></p>\\r\\n            <p>Wind (max): <span data-field=\\\"wind\\\">\"\n    + alias1(alias2(((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.maxwind_kph : stack1), depth0))\n    + \" kph</span></p>\\r\\n            <p>Conditions: <span data-field=\\\"conditions\\\">\"\n    + alias1(alias2(((stack1 = ((stack1 = (depth0 != null ? depth0.day : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.text : stack1), depth0))\n    + \"</span></p>\\r\\n        </li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<section class=\\\"forecast is-hidden\\\" id=\\\"forecast\\\">\\r\\n    <h2>Weather forecast</h2>\\r\\n    <ul class=\\\"forecast-list\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"    </ul>\\r\\n</section>\";\n},\"useData\":true});"],"sourceRoot":""}