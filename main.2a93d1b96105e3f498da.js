(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{OPH6:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);var o=n("g2pJ"),a=n.n(o);n("OPH6");class i{constructor({dBase:e="http://api.apixu.com/v1",dKey:t="86c35fa65a404206876174320190508",location:n="Kiev"}){this.dBase=e,this.dKey=t,this.location=n}getBase(){return this.dBase}setLocation(e){this.location=e}getLocation(){return this.location}}class s extends i{constructor(e){super({location:e}),this.dResource="/current.json"}get(){const e=`${this.dBase}${this.dResource}?key=${this.dKey}&q=${this.location}`;return fetch(e).then(e=>e.json())}}class r extends i{constructor(e,t=7){super({location:e}),this.dResource="/forecast.json",this.days=t}get(){const e=`${this.dBase}${this.dResource}?key=${this.dKey}&q=${this.location}&days=${this.days}`;return fetch(e).then(e=>e.json()).catch(e=>{throw new Error(e)})}}const c={form:{_self:document.querySelector("#search-form"),input:document.querySelector("#search-form").querySelector("input"),button:document.querySelector("#search-form").querySelector("button")},w:{_self:document.querySelector("#weather"),icon:document.querySelector(".icon"),location:document.querySelector('span[data-field="location"]'),temperature:document.querySelector('span[data-field="temp"]'),humidity:document.querySelector('span[data-field="humidity"]'),wind:document.querySelector('span[data-field="wind"]'),conditions:document.querySelector('span[data-field="conditions"]')}};function l(e,t){c.w.icon.src=`https:${t.condition.icon}`,c.w.icon.alt=t.condition.text,c.w.location.innerHTML=`${e.name}<br>(${e.region}, ${e.country})<br>Lt/Ln: ${e.lat}, ${e.lon}`,c.w.temperature.innerHTML=`${t.temp_c}&#8451`,c.w.humidity.innerHTML=t.humidity,c.w.wind.innerHTML=`${t.wind_dir} ${t.wind_kph}kph`,c.w.conditions.innerHTML=t.condition.text,c.w._self.classList.remove("is-hidden")}function u(e){const t=(n=e,a()(n));var n;const o=document.querySelector("#forecast");null!==o&&o.remove(),c.w._self.insertAdjacentHTML("afterend",t)}c.form._self.addEventListener("submit",function(e){e.preventDefault();const t=new s,n=new r;for(const e of Object.entries(c.form))e.disabled=!0;if(""!==c.form.input.value)t.setLocation(c.form.input.value),t.get().then(e=>l(e.location,e.current)).catch(e=>alert(`Location "${userLocation}"\ndoes not recogized by ${n.getBase()}\nor service "Current Weather" is unavailable.`)),n.setLocation(c.form.input.value),n.get().then(e=>u(e.forecast.forecastday)).catch(e=>alert(`Location "${userLocation}"\ndoes not recogized by ${n.getBase()}\nor service "Weather Forecast" is unavailable.`)),c.form._self.reset();else{(()=>{const e={timeout:5e3};return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(t,n,e)})})().then(e=>{t.setLocation(`${e.coords.latitude} ${e.coords.longitude}`),t.get().then(e=>l(e.location,e.current)).catch(e=>alert(`Location "${userLocation}"\ndoes not recogized by ${n.getBase()}\nor service "Current Weather" is unavailable.`)),n.setLocation(`${e.coords.latitude} ${e.coords.longitude}`),n.get().then(e=>u(e.forecast.forecastday)).catch(e=>alert(`Location "${userLocation}"\ndoes not recogized by ${n.getBase()}\nor service "Weather Forecast" is unavailable.`))}).catch(e=>{userLocation="UNDEFINED"}),console.log(t.getLocation()),console.log(n.getLocation())}for(const e of Object.entries(c.form))e.disabled=!1})},g2pJ:function(e,t,n){var o=n("mp5j");e.exports=(o.default||o).template({1:function(e,t,n,o,a){var i,s,r=e.escapeExpression,c=e.lambda;return'        <li class="forecast-day">\r\n            <span class="date">'+r("function"==typeof(s=null!=(s=n.date||(null!=t?t.date:t))?s:n.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"date",hash:{},data:a}):s)+'</span>\r\n            <img class="icon" src="https:'+r(c(null!=(i=null!=(i=null!=t?t.day:t)?i.condition:i)?i.icon:i,t))+'" alt="'+r(c(null!=(i=null!=(i=null!=t?t.day:t)?i.condition:i)?i.text:i,t))+'" />\r\n            <p> SUN (rise/set) <span data-field="temp">'+r(c(null!=(i=null!=t?t.astro:t)?i.sunrise:i,t))+"/"+r(c(null!=(i=null!=t?t.astro:t)?i.sunset:i,t))+'</span></p>\r\n            <p>T&#8451; (max/min/ave): <span data-field="temp">'+r(c(null!=(i=null!=t?t.day:t)?i.maxtemp_c:i,t))+"/"+r(c(null!=(i=null!=t?t.day:t)?i.mintemp_c:i,t))+"/"+r(c(null!=(i=null!=t?t.day:t)?i.avgtemp_c:i,t))+' &#8451;</span></p>\r\n            <p>Humidity (ave): <span data-field="humidity">'+r(c(null!=(i=null!=t?t.day:t)?i.avghumidity:i,t))+' %</span></p>\r\n            <p>Wind (max): <span data-field="wind">'+r(c(null!=(i=null!=t?t.day:t)?i.maxwind_kph:i,t))+' kph</span></p>\r\n            <p>Conditions: <span data-field="conditions">'+r(c(null!=(i=null!=(i=null!=t?t.day:t)?i.condition:i)?i.text:i,t))+"</span></p>\r\n        </li>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,a){var i;return'<section class="forecast is-hidden" id="forecast">\r\n    <h2>Weather forecast</h2>\r\n    <ul class="forecast-list">\r\n'+(null!=(i=n.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?i:"")+"    </ul>\r\n</section>"},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.2a93d1b96105e3f498da.js.map